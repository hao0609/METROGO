<template>
    <div class="container">
        <div class="side-bar">
            <div class="side-bar-top">
                <div class="profile-pic">ğŸ‘¤</div>
                <div class="point-group">
                    <p class="caption txt-neutral-400">ç›®å‰ç©åˆ†</p>
                    <div class="title1 bold">250</div>
                </div>
                <div class="btn-group">
                    <button class="btn-mission">çå‹µé ˜å–</button>
                    <button class="btn-mission">é›†ç« å†Š</button>
                </div>
            </div>
            <div class="side-bar-bottom">
                <div class="menu">
                    <div 
                        v-for="(item, index) in menuItems" 
                        :key="index"
                        class="menu-item"
                        :class="{ active: activeMenuItem === item.id }"
                        @click="handleMenuClick(item.id)"
                    >
                        {{ item.text }}<SubwayRightIcon/>
                    </div>
                    <button class="btn_white small">ç™»å‡º</button>
                </div>
                <div class="menu_mobile">
                    <div class="select-group">
                        <div class="select-wrapper">
                            <select class="select-field" @change="handleMobileMenuChange($event)">
                                <option value="" disabled selected>ä¸‹æ‹‰é¸é …</option>
                                <option v-for="(item, index) in menuItems" 
                                        :key="index" 
                                        :value="item.id">
                                    {{ item.text }}
                                </option>
                            </select>
                            <span class="select-arrow"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- æœƒå“¡è³‡æ–™ -->
        <div class="container-right" id="userInfo" :style="{ display: activeMenuItem === 'userInfo' ? 'block' : 'none' }">
            <div class="title1 bold">æœƒå“¡è³‡æ–™</div>
            <div class="content">
                <div class="profile-pic">ğŸ‘¤</div>
                <div class="form-group">
                    <label class="input-label">æœƒå“¡åç¨±</label>
                    <div class="input-wrapper">
                        <input type="text" class="input-field" v-model="userName" placeholder="">
                    </div>
                </div>
                <div class="form-group disabled">
                    <label class="input-label">æœƒå“¡ä¿¡ç®±</label>
                    <div class="input-wrapper">
                        <input type="text" class="input-field" v-model="userEmail" disabled>
                    </div>
                </div>
                <button class="btn_filled">æ›´æ–°è³‡æ–™</button>
            </div>
        </div>
        
        <!-- ä¿®æ”¹å¯†ç¢¼ -->
        <div class="container-right" id="changePassward" :style="{ display: activeMenuItem === 'changePassward' ? 'block' : 'none' }">
            <div class="title1 bold">ä¿®æ”¹å¯†ç¢¼</div>
            <div class="content">   
                <div class="form-group">
                    <label class="input-label required">è¨­å®šæ–°å¯†ç¢¼</label>
                    <div class="input-wrapper with-icon">
                        <input type="text" class="input-field" placeholder="Placeholder">
                        <EyeoffIcon class="input-icon"/>
                        <EyeIcon class="input-icon" style="display: none"/>
                    </div>
                </div>
                <div class="form-group">
                    <label class="input-label required">å†æ¬¡è¼¸å…¥æ–°å¯†ç¢¼</label>
                    <div class="input-wrapper with-icon">
                        <input type="text" class="input-field" placeholder="Placeholder">
                        <EyeoffIcon class="input-icon" style="display: none"/>
                        <EyeIcon class="input-icon" />
                    </div>
                </div>
                <button class="btn_filled">æ›´æ–°å¯†ç¢¼</button>
            </div>
        </div>
        <!-- å•†å“æ”¶è— -->
        <div class="container-right" id="productCollection" :style="{ display: activeMenuItem === 'productCollection' ? 'block' : 'none' }">
            <div class="title1 bold">å•†å“æ”¶è—</div>
            <div class="content">   
                <div class="product-list">  
                    <div class="product">
                        <div class="img-product-photo"></div>
                        <div class="icon-heart"><HearFillIcon/></div>
                        <div class="btn-group">
                            <button class="btn_outline small">æŸ¥çœ‹è©³æƒ…</button>
                            <div class="cart-btn"><CartIcon/></div>
                        </div>
                    </div>
                    <div class="product">
                        <div class="img-product-photo"></div>
                        <div class="icon-heart"><HearFillIcon/></div>
                        <div class="btn-group">
                            <button class="btn_outline small">æŸ¥çœ‹è©³æƒ…</button>
                            <div class="cart-btn"><CartIcon/></div>
                        </div>
                    </div>
                    <div class="product">
                        <div class="img-product-photo"></div>
                        <div class="icon-heart"><HearFillIcon/></div>
                        <div class="btn-group">
                            <button class="btn_outline small">æŸ¥çœ‹è©³æƒ…</button>
                            <div class="cart-btn"><CartIcon/></div>
                        </div>
                    </div>
                    <div class="product">
                        <div class="img-product-photo"></div>
                        <div class="icon-heart"><HearFillIcon/></div>
                        <div class="btn-group">
                            <button class="btn_outline small">æŸ¥çœ‹è©³æƒ…</button>
                            <div class="cart-btn"><CartIcon/></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- è¨‚å–®ç®¡ç† -->
        <div class="container-right" id="orderList" :style="{ display: activeMenuItem === 'orderList' ? 'block' : 'none' }">
            <div class="title1 bold">è¨‚å–®ç®¡ç†</div>
            <div class="order-table">
                <table>
                    <thead>
                        <tr>
                            <th>è¨‚å–®ç·¨è™Ÿ</th>
                            <th>è¨‚è³¼æ—¥æœŸ</th>
                            <th>è¨‚å–®ç‹€æ…‹</th>
                            <th>ç‰©æµç‹€æ…‹</th>
                            <th>ç¸½é‡‘é¡</th>
                            <th>åŠŸèƒ½</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr 
                            v-for="(order, index) in orders" 
                            :key="order.id" 
                            :class="{ 'highlight-row': index % 2 === 1 }"
                        >
                            <td>{{ order.id }}</td>
                            <td>{{ order.date }}</td>
                            <td>{{ order.status }}</td>
                            <td>{{ order.logistics }}</td>
                            <td>NT$ {{ order.amount }}</td>
                            <td>
                                <button class="btn_outline small" @click="handleOrderDetails(order.id)">æŸ¥çœ‹è©³æƒ…</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div> 

        <!-- å½ˆçª—ï¼Œé è¨­éš±è— -->
        <div id="orderDetailDialog" style="display: none;">
            <div class="order-detail-content">
                <div class="detail-section">
                    <p class="title2 bold dialog-title">è¨‚å–®è©³æƒ…</p>
                    <p class="title2 bold list-title">å•†å“æ˜ç´°</p>
                    <div class="items-list">
                        <div v-for="(item, index) in selectedOrder?.items" :key="index" class="item-row">
                            <span>{{ item.name }}</span>
                            <span>x{{ item.quantity }}</span>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div class="amount-row">
                        <span>è¨‚å–®é‡‘é¡</span>
                        <span class="bold">${{ selectedOrder?.amount }}</span>
                    </div>
                </div>
                
                <div class="receiver-section">
                    <div class="form-group">
                        <label class="input-label">æ”¶ä»¶äººåç¨±</label>
                        <div class="input-wrapper disabled">
                            <input type="text" class="value input-field" :value="selectedOrder?.receiver.name" disabled>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="input-label">æ”¶ä»¶äººé›»è©±</label>
                        <div class="input-wrapper disabled">
                            <input type="text" class="value input-field" :value="selectedOrder?.receiver.phone" disabled>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="input-label">æ”¶ä»¶åœ°å€</label>
                        <div class="input-wrapper disabled">
                            <input type="text" class="value input-field" :value="selectedOrder?.receiver.address" disabled>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>    
</template>

<style lang="scss" scoped>
@use '../assets/sass/page/userprofile.scss';
</style>

<script>
// Icons
import SubwayRightIcon from '@/components/icons/IconSubwayRight.vue';
import EyeoffIcon from '@/components/icons/IconEyeoff.vue';
import EyeIcon from '@/components/icons/IconEye.vue';
import HearFillIcon from '@/components/icons/IconHeartfill.vue';
import CartIcon from '@/components/icons/IconCart.vue';
// å½ˆçª—
// import Alert_web_M from '@/components/Alert_web_M.vue';
import Swal from 'sweetalert2';


export default {
    name: "UseProfile",
    components: {
        SubwayRightIcon,
        EyeoffIcon,
        EyeIcon,
        HearFillIcon,
        CartIcon,
        //Alert_web_M,
    },
    data() {
        return {
            activeMenuItem: 'userInfo', // é è¨­é¡¯ç¤ºæœƒå“¡è³‡æ–™ tab
            menuItems: [
                { id: 'userInfo', text: 'æœƒå“¡è³‡æ–™' },
                { id: 'changePassward', text: 'ä¿®æ”¹å¯†ç¢¼' },
                { id: 'productCollection', text: 'å•†å“æ”¶è—' },
                { id: 'orderList', text: 'è¨‚å–®ç®¡ç†' }
            ],
            // æœƒå“¡è³‡æ–™é è¨­é¡¯ç¤º
            userName: "ç‹å°æ˜",
            userEmail: "Test1234@gmail.com",
            // è¨‚å–®è³‡æ–™
            selectedOrder: null,
            orders: [
                    { 
                        id: 'TID201111', 
                        date: '2024-11-20 22:56:05', 
                        status: 'è™•ç†ä¸­', 
                        logistics: 'å°šæœªå‡ºè²¨', 
                        amount: 500,
                        items: [
                            { name: 'å•†å“åç¨± AAA', quantity: 1 },
                            { name: 'å•†å“åç¨± AAA', quantity: 1 }
                        ],
                        receiver: {
                            name: 'ç‹å°æ˜',
                            phone: '0912345789',
                            address: 'åœ°å€'
                        }
                    },
                    ],
            //// Alert_M
            // alertInfo: {
            // fristTitle: 'è¨‚å–®è©³æƒ…',
            // svg_icon: `...`,
            // SecondTittle: '',
            // ThirdTittle: '',
            // ButtonText: 'ç¢ºèª',
            // allowOutsideClick: true,
            // function: () => {
            //     console.log('Alert ç¢ºèªæŒ‰éˆ•è¢«é»æ“Š');
            // }
            
        }
    },
    methods: {
        handleMenuClick(menuId) {
            this.activeMenuItem = menuId;
        },
        handleMobileMenuChange(event) {
            this.activeMenuItem = event.target.value;
        },
        // è¨‚å–®è©³æƒ…è«‡çª—
        handleOrderDetails(orderId) {
            this.selectedOrder = this.orders.find(o => o.id === orderId);
            if (this.selectedOrder) {
                const template = document.getElementById('orderDetailDialog');
                Swal.fire({
                    html: template.innerHTML,
                    confirmButtonText: 'é—œé–‰',
                    customClass: {
                        popup: 'dialog-order-detail',
                        confirmButton: 'btn_filled'
                    },
                    showCloseButton: false,
                    showClass: {
                        popup: 'animate__animated animate__fadeIn'
                    },
                    hideClass: {
                        popup: 'animate__animated animate__fadeOut'
                    }
                });
            }
        }
    },
    
};
</script>